<!DOCTYPE html>
<html>
<head>
    <title>Som Oefeningen</title>

    <!-- 1. Load platform support before any code that touches the DOM. -->
    <script src="resources/components/bower_components/webcomponentsjs/webcomponents.js"></script>

    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">

    <!-- Element Imports -->
    <link rel="import" href="resources/elements/math-gen.html"/>
    <link rel="import" href="resources/elements/math-exercise.html"/>
    <link rel="import" href="resources/elements/math-stats.html"/>
    <link rel="import" href="resources/elements/math-config.html"/>

    <link rel="stylesheet" href="resources/css/mathex.css"/>

</head>
<body unresolved>

<h1>Som Oefeningen</h1>
<math-gen></math-gen>
<math-exercise></math-exercise>
<math-stats></math-stats>
<math-config></math-config>

<script>
    // Ensure Polymer has been able to do its work
    window.addEventListener('polymer-ready', function(e) {
        var mathGen = document.querySelector('math-gen');
        var mathExercise = document.querySelector('math-exercise');
        var mathStats = document.querySelector('math-stats');
        var mathConfig = document.querySelector('math-config');

        mathExercise.exercise = mathGen.next();

        mathExercise.addEventListener('math-correct', function (e) {
            console.log("math-correct Event Received");
            mathExercise.exercise = mathGen.next();
            mathStats.correct++;
        });
        mathExercise.addEventListener('math-mistake', function (e) {
            console.log("math-mistake Event Received");
            mathStats.mistakes++;
        });

        mathConfig.addEventListener('config-updated', function (e) {
            console.log("config-updated Event Received");
            var newConfig = e.detail;

            console.log('newConfig = '+JSON.stringify(newConfig));

            mathGen.min = newConfig.min-0; // Convert to number
            mathGen.max = newConfig.max-0; // Convert to number
            mathGen.sum2 = newConfig.sum2;
            mathGen.sum3 = newConfig.sum3;

        });
    });
</script>
</body>
</html>